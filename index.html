<!DOCTYPE html>
<html>
  <body>
    <brewery-app></brewery-app>

    <script type="module">
      import { LitElement, html } from 'https://unpkg.com/lit-element?module';

      class BreweryApp extends LitElement {
        static get properties() {
          return {
            loading: { type: Boolean },
            breweries: { type: Array },
          };
        }

        connectedCallback() {
          super.connectedCallback();

          if (!this.breweries) {
            this._fetchBreweries();
          }
        }

        async _fetchBreweries() {
          this.loading = true;
          const response = await fetch('https://api.openbrewerydb.org/breweries');
          const jsonResponse = await response.json();
          this.breweries = jsonResponse;
          this.loading = false;
        }

        render() {
          if (this.loading) {
            return html`<p>Loading...</p>`;
          }

          return html`
            <pre>${JSON.stringify(this.breweries, null, 2)}</pre>
          `;
        }
      }

      customElements.define('brewery-app', BreweryApp);
    </script>
  </body>
</html>